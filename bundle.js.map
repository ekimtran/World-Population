{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.js"],"names":["width","height","sens","focused","globeProj","d3","geo","orthographic","rotate","translate","clipAngle","scale","path","projection","svg","select","append","attr","datum","type","land","data","countrySearch","countryList","queue","defer","json","tsv","ready","error","world","countryData","countryById","countries","topojson","feature","objects","features","forEach","c","id","name","option","text","property","selectAll","enter","call","behavior","drag","origin","r","x","y","on","event","classed","d","style","pageX","pageY","focusedCountry","country","p","centroid","transition","duration","tween","interpolate","t","i","cnt","sel","l","length","value"],"mappings":"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","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","let width = 1000;\nlet height = 900;\nlet sens = 0.25;\nlet focused;\n\nlet globeProj = d3.geo\n  .orthographic()\n  .rotate([0, 0])\n  .translate([width / 2, height / 2])\n  .clipAngle(90)\n  .scale(350)\n\nlet path = d3.geo.path().projection(globeProj);\n\n//globe\n\nsvg = d3\n  .select('body')\n  .append('svg')\n  .attr('width', width)\n  .attr('height', height);\n\n\nsvg\n  .append('path')\n  .datum({ type: 'Sphere' })\n  .attr('class', 'globe')\n  .attr('d', path);\n\nland\n  .append('path.land')\n  .data\n\nlet countrySearch = d3\n    .select('body')\n    .append('div')\n    .attr('class', 'countrySearch')\n\nlet countryList = d3\n    .select('body')\n    .append('select')\n    .attr('name', 'countries');\n\nqueue()\n  .defer(d3.json, 'world-110m.json')\n  .defer(d3.tsv, 'world-country-names.tsv')\n  .await(ready);\n\n\nfunction ready(error, world, countryData) {\n  let countryById = {},\n    countries = topojson.feature(world, world.objects.countries).features;\n\n  //Adding countries to select\n\n  countryData.forEach(function(c) {\n    countryById[c.id] = c.name;\n    option = countryList.append('option');\n    option.text(c.name);\n    option.property('value', c.id);\n  });\n\n  //Drawing countries on the globe\n\n  var world = svg\n    .selectAll('path.land')\n    .data(countries)\n    .enter()\n    .append('path')\n    .attr('class', 'land')\n    .attr(\"d\", path)\n    \n\n    //Drag event\n\n    .call(\n      d3.behavior\n        .drag()\n        .origin(function() {\n          let r = globeProj.rotate();\n          return { x: r[0] / sens, y: -r[1] / sens };\n        })\n        .on(\"drag\", function() {\n          let rotate = globeProj.rotate();\n          globeProj.rotate([d3.event.x * sens, -d3.event.y * sens, rotate[2]]);\n          svg.selectAll(\"path.land\").attr(\"d\", path);\n          svg.selectAll(\".focused\").classed(\"focused\", (focused = false));\n        })\n    )\n\n    //Mouse events\n\n    .on(\"mouseover\", function(d) {\n      countrySearch\n        .text(countryById[d.id])\n        .style(\"left\", d3.event.pageX + 7 + \"px\")\n        .style(\"top\", d3.event.pageY - 15 + \"px\")\n        .style(\"display\", \"block\")\n        .style(\"opacity\", 1);\n    })\n    .on(\"mouseout\", function(d) {\n      countrySearch.style(\"opacity\", 0).style(\"display\", \"none\");\n    })\n    .on(\"mousemove\", function(d) {\n      countrySearch\n        .style(\"left\", d3.event.pageX + 7 + \"px\")\n        .style(\"top\", d3.event.pageY - 15 + \"px\")\n    });\n\n  //Country focus on option select\n\n  d3.select(\"select\").on(\"change\", function() {\n    var rotate = globeProj.rotate(),\n      focusedCountry = country(countries, this),\n      p = d3.geo.centroid(focusedCountry);\n\n    svg.selectAll(\".focused\").classed(\"focused\", (focused = false));\n\n    //Globe rotating\n\n    (function transition() {\n      d3.transition()\n        .duration(2500)\n        .tween(\"rotate\", function() {\n          var r = d3.interpolate(globeProj.rotate(), [-p[0], -p[1]]);\n          return function(t) {\n            globeProj.rotate(r(t));\n            svg\n              .selectAll(\"path\")\n              .attr(\"d\", path)\n              .classed(\"focused\", function(d, i) {\n                return d.id == focusedCountry.id ? (focused = d) : false;\n              });\n          };\n        });\n    })();\n  });\n\n  function country(cnt, sel) {\n    for (var i = 0, l = cnt.length; i < l; i++) {\n      if (cnt[i].id == sel.value) {\n        return cnt[i];\n      }\n    }\n  }\n}\n"],"sourceRoot":""}